<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a list of rules — rules • ruler</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>

<meta property="og:title" content="Create a list of rules — rules" />
<meta property="og:description" content="rules() is a function designed to create input for .funs argument of
scoped dplyr &quot;mutating&quot; verbs (such as
summarise_all() and
transmute_all()). For version of dplyr less than
0.8.0 it is a direct wrapper for funs() which does custom
name repair (see 'Details'). For newer versions it converts bare expressions
with . as input into formulas and repairs names of the output." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ruler</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/design-and-format.html">Design Process and Exposure Format</a>
    </li>
    <li>
      <a href="../articles/rule-packs.html">Rule Packs</a>
    </li>
    <li>
      <a href="../articles/validation.html">Validation</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/echasnovski/ruler/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a list of rules</h1>
    <small class="dont-index">Source: <a href='https://github.com/echasnovski/ruler/blob/master/R/rules.R'><code>R/rules.R</code></a></small>
    <div class="hidden name"><code>rules.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>rules()</code> is a function designed to create input for <code>.funs</code> argument of
scoped <code>dplyr</code> "mutating" verbs (such as
<a href='https://dplyr.tidyverse.org/reference/summarise_all.html'>summarise_all()</a> and
<a href='https://dplyr.tidyverse.org/reference/mutate_all.html'>transmute_all()</a>). For version of <code>dplyr</code> less than
0.8.0 it is a direct wrapper for <a href='https://dplyr.tidyverse.org/reference/funs.html'>funs()</a> which does custom
name repair (see 'Details'). For newer versions it converts bare expressions
with <code>.</code> as input into formulas and repairs names of the output.</p>
    </div>

    <pre class="usage"><code class = "r"><span class='fu'>rules</span><span class='op'>(</span><span class='va'>...</span>, .args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>, .prefix <span class='op'>=</span> <span class='st'>"._."</span><span class='op'>)</span></code></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>Element(s) suitable as <code>.funs</code> argument (in scoped "mutating"
verbs) for current version of <code>dplyr</code>. It can also be a bare expression
with <code>.</code> as input even if <code>dplyr</code> version is 0.8.0 or newer.</p></td>
    </tr>
    <tr>
      <th>.args</th>
      <td><p>A named list of additional arguments to be added to all function
calls (as in <code><a href='https://dplyr.tidyverse.org/reference/funs.html'>dplyr::funs()</a></code>). <strong>Note</strong> that this argument isn't used if
installed version of <code>dplyr</code> is 0.8.0 or newer. Use other methods to supply
arguments: <code>...</code> argument in scoped verbs or make own
explicit functions.</p></td>
    </tr>
    <tr>
      <th>.prefix</th>
      <td><p>Prefix to be added to function names.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>rules()</code> repairs names by the following algorithm:</p><ul>
<li><p>Absent names are replaced with the 'rule__\ind\' where \ind\ is the
index of function position in the <code>...</code> .</p></li>
<li><p><code>.prefix</code> is added at the beginning of all names. The default is <code>._.</code> . It
is picked for its symbolism (it is the Morse code of letter 'R') and rare
occurrence in names. In those rare cases it can be manually changed but
this will not be tracked further. <strong>Note</strong> that it is a good idea for
<code>.prefix</code> to be <a href='https://rdrr.io/r/base/make.names.html'>syntactic</a>, as newer versions of <code>dplyr</code> (&gt;=
0.8.0) will force tibble names to be syntactic. To check if string is
"good", use it as input to <code><a href='https://rdrr.io/r/base/make.names.html'>make.names()</a></code>: if output equals that string
than it is a "good" choice.</p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><code class = "r"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='fu'>utils</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/utils/packageDescription.html'>packageVersion</a></span><span class='op'>(</span><span class='st'>"dplyr"</span><span class='op'>)</span> <span class='op'>&lt;</span> <span class='st'>"0.8.0"</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>rules_1</span> <span class='op'>&lt;-</span> <span class='fu'>rules</span><span class='op'>(</span><span class='va'>mean</span>, <span class='va'>sd</span>, .args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>
  <span class='va'>rules_1_ref</span> <span class='op'>&lt;-</span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/funs.html'>funs</a></span><span class='op'>(</span>
    <span class='st'>"._.rule__1"</span> <span class='op'>=</span> <span class='va'>mean</span>, <span class='st'>"._.rule__2"</span> <span class='op'>=</span> <span class='va'>sd</span>,
    .args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
  <span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span><span class='op'>(</span><span class='va'>rules_1</span>, <span class='va'>rules_1_ref</span><span class='op'>)</span>

  <span class='va'>rules_2</span> <span class='op'>&lt;-</span> <span class='fu'>rules</span><span class='op'>(</span><span class='va'>mean</span>, sd <span class='op'>=</span> <span class='va'>sd</span>, <span class='st'>"var"</span><span class='op'>)</span>
  <span class='va'>rules_2_ref</span> <span class='op'>&lt;-</span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/funs.html'>funs</a></span><span class='op'>(</span>
    <span class='st'>"._.rule__1"</span> <span class='op'>=</span> <span class='va'>mean</span>,
    <span class='st'>"._.sd"</span> <span class='op'>=</span> <span class='va'>sd</span>,
    <span class='st'>"._.rule__3"</span> <span class='op'>=</span> <span class='st'>"var"</span>
  <span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span><span class='op'>(</span><span class='va'>rules_2</span>, <span class='va'>rules_2_ref</span><span class='op'>)</span>

  <span class='va'>rules_3</span> <span class='op'>&lt;-</span> <span class='fu'>rules</span><span class='op'>(</span><span class='va'>mean</span>, .prefix <span class='op'>=</span> <span class='st'>"a_a_"</span><span class='op'>)</span>
  <span class='va'>rules_3_ref</span> <span class='op'>&lt;-</span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/funs.html'>funs</a></span><span class='op'>(</span><span class='st'>"a_a_rule__1"</span> <span class='op'>=</span> <span class='va'>mean</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span><span class='op'>(</span><span class='va'>rules_3</span>, <span class='va'>rules_3_ref</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='kw'>if</span> <span class='op'>(</span><span class='fu'>utils</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/utils/packageDescription.html'>packageVersion</a></span><span class='op'>(</span><span class='st'>"dplyr"</span><span class='op'>)</span> <span class='op'>&gt;=</span> <span class='st'>"0.8.0"</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='co'># `rules()` also accepts bare expression calls with `.` as input, which is</span>
  <span class='co'># not possible with advised `list()` approach of `dplyr`</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise_all.html'>summarise_all</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>]</span>, <span class='fu'>rules</span><span class='op'>(</span><span class='va'>sd</span>, <span class='st'>"sd"</span>, <span class='fu'><a href='https://rdrr.io/r/stats/sd.html'>sd</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span>, <span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/stats/sd.html'>sd</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise_all.html'>summarise_all</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>]</span>, <span class='fu'>rules</span><span class='op'>(</span><span class='va'>sd</span>, .prefix <span class='op'>=</span> <span class='st'>"a_a_"</span><span class='op'>)</span><span class='op'>)</span>

  <span class='co'># Use `...` in `summarise_all()` to supply extra arguments</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise_all.html'>summarise_all</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, <span class='cn'>NA</span><span class='op'>)</span><span class='op'>)</span>, <span class='fu'>rules</span><span class='op'>(</span><span class='va'>sd</span><span class='op'>)</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='op'>}</span>
</div><div class='output co'>#&gt;   ._.rule__1
#&gt; 1  0.7071068</div></code></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Evgeni Chasnovski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


